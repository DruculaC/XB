C51 COMPILER V9.01   UART                                                                  05/30/2013 10:23:44 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\out\UART.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE UART.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\UART.lst) OBJECT(.\o
                    -ut\UART.obj)

line level    source

   1          
   2           #include"N79E81x.h"
   3           #include"UART.h"
   4          
   5          
   6          
   7          
   8          
   9          //定义通信命令
  10          
  11          
  12          
  13          
  14          
  15          
  16          unsigned char code PassWord[1000]=
  17          {
  18           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  19          
  20           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  21          
  22           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  23          
  24           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  25          
  26           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  27          
  28           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  29          
  30           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  31          
  32           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  33          
  34           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  35          
  36           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
C51 COMPILER V9.01   UART                                                                  05/30/2013 10:23:44 PAGE 2   

             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  37          
  38           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  39          
  40           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  41          
  42           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  43          
  44           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  45          
  46           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  47          
  48           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  49          
  50           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  51          
  52           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  53          
  54           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  55          
  56           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31
  57           } ;
  58          
  59          
  60          
  61          
  62          
  63          
  64          
  65          
  66          
  67          /*
  68          函数名： void InitUART()
  69          功能：  初始化UART
  70          说明：
  71          入口参数：无
  72          返回值：  无
  73          */
  74          void InitUART()
  75          {
  76   1              AUXR1 &=0xbf ; 
C51 COMPILER V9.01   UART                                                                  05/30/2013 10:23:44 PAGE 3   

  77   1              SCON=0x5a;
  78   1              TMOD=0x20;
  79   1              TH1=TL1=-(FOSC/12/32/BAUD);
  80   1              TR1=1;
  81   1      }
  82          
  83          
  84          
  85          
  86          /*
  87          函数名： void SendData(BYTE dat)
  88          功能：  发送函数
  89          说明：
  90          入口参数：要发送的字节
  91          返回值：  无
  92          */
  93          void SendData(unsigned char dat)
  94          {
  95   1              SBUF=dat;
  96   1              while(!TI);TI=0;
  97   1              
  98   1      }
  99          
 100          
 101          
 102          
 103          /*
 104          函数名：void SendNByte(BYTE *buf,BYTE len)
 105          功能： 发送多个字节
 106          说明：
 107          入口参数：要发送的数据地址，发送的字节长度
 108          返回值： 无
 109          */
 110          void SendNByte(unsigned char *buf,unsigned char len)
 111          {
 112   1              while(len--)
 113   1              {
 114   2                      SendData(*buf++);
 115   2              }
 116   1      }
 117          
 118          
 119          unsigned int select(unsigned char receData)//查询函数，查询密码表里面的密码对的住的就返回此密码的地址
 120          {
 121   1              unsigned int i=1000;
 122   1              do{
 123   2                      if(PassWord[i-1]==receData)  //密码对的住，就返回密码表的地址
 124   2                      {
 125   3                              return (i-1);//返回地址
 126   3                      }
 127   2                      i--;
 128   2                      
 129   2              }while(i!=0);
 130   1      
 131   1              return 1001;//没有就返回1001
 132   1      
 133   1      }
 134          
 135          
 136          
 137          
 138          
C51 COMPILER V9.01   UART                                                                  05/30/2013 10:23:44 PAGE 4   

 139          
 140          
 141          
 142          
 143          
 144          
 145          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    111    ----
   CONSTANT SIZE    =   1000    ----
   XDATA SIZE       =   ----       3
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
