C51 COMPILER V9.01   UART                                                                  05/04/2013 18:16:16 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\out\UART.obj
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE UART.c BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\UART.lst) OBJECT(.\out\UAR
                    -T.obj)

line level    source

   1          
   2          
   3           #include"N79E81x.h"
   4           #include"UART.h"
   5          
   6          //typedef unsigned char BYTE;
   7          //typedef unsigned int  WORD;
   8          
   9          
  10          
  11          
  12          
  13          
  14          
  15          //定义通信命令
  16          
  17          
  18          
  19          
  20          
  21          unsigned char code PassWord[1000]=
  22          {
  23           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  24          
  25           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  26          
  27           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  28          
  29           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  30          
  31           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  32          
  33           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  34          
  35           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  36          
  37           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  38          
C51 COMPILER V9.01   UART                                                                  05/04/2013 18:16:16 PAGE 2   

  39           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  40          
  41           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  42          
  43           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  44          
  45           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  46          
  47           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  48          
  49           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  50          
  51           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  52          
  53           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  54          
  55           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  56          
  57           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  58          
  59           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31,
  60          
  61           0x00,0x01,0x02,0x03,0x04,0x05,0x06,0x07,0x08,0x09,0x0a,0x0b,0x0c,0x0d,0x0e,0x0f,0x10,0x11,0x12,0x13,0x14,
             -0x15,0x16,0x17,0x18,0x19,0x1a,0x1b,0x1c,0x1d,0x1e,0x1f,0x20,0x21,0x22,0x23,0x24,0x25,0x26,0x27,0x28,0x29,0x2a,0x2b,0x2c,
             -0x2d,0x2e,0x2f,0x30,0x31
  62           } ;
  63          
  64          
  65          
  66          
  67          
  68          
  69          /*
  70          函数名： void InitUART()
  71          功能：  初始化UART
  72          说明：
  73          入口参数：无
  74          返回值：  无
  75          */
  76          void InitUART()
C51 COMPILER V9.01   UART                                                                  05/04/2013 18:16:16 PAGE 3   

  77          {
  78   1              AUXR1 &=0xbf ; 
  79   1              SCON=0x5a;
  80   1              TMOD=0x20;
  81   1              TH1=TL1=-(FOSC/12/32/BAUD);
  82   1              TR1=1;
  83   1      }
  84          
  85          
  86          
  87          
  88          /*
  89          函数名： void SendData(BYTE dat)
  90          功能：  发送函数
  91          说明：
  92          入口参数：要发送的字节
  93          返回值：  无
  94          */
  95          void SendData(unsigned char dat)
  96          {
  97   1              SBUF=dat;
  98   1              while(!TI);TI=0;
  99   1              
 100   1      }
 101          
 102          
 103          
 104          
 105          /*
 106          函数名：void SendNByte(BYTE *buf,BYTE len)
 107          功能： 发送多个字节
 108          说明：
 109          入口参数：要发送的数据地址，发送的字节长度
 110          返回值： 无
 111          */
 112          void SendNByte(unsigned char *buf,unsigned char len)
 113          {
 114   1              while(len--)
 115   1              {
 116   2                      SendData(*buf++);
 117   2              }
 118   1      }
 119          
 120          
 121          
 122          
 123          ///*
 124          //函数名：BYTE GetData()
 125          //功能：        接收函数
 126          //说明：
 127          //入口参数 ：无
 128          //返回值： 接收到的数据
 129          //*/
 130          //unsigned char GetData(void)
 131          //{
 132          //      unsigned char datt;
 133          //      while(!RI);RI=0;
 134          //      datt=SBUF;
 135          //      return datt;
 136          //}
 137          
 138          
C51 COMPILER V9.01   UART                                                                  05/04/2013 18:16:16 PAGE 4   

 139          
 140          
 141          ///*
 142          //函数名：WORD  GainSum(BYTE *oneData,BYTE dataLen)
 143          //功能：        求和函数，作为奇偶校验
 144          //说明：
 145          
 146          //入口参数：接收的数据部分      ,数据长度
 147          //返回值：  校验数据
 148          //*/
 149          //unsigned int  GainSum(unsigned char *oneData,unsigned char dataLen)
 150          //{
 151          //      unsigned char i=0;
 152          //      unsigned int between=0;
 153          //
 154          //
 155          //      for(i=0;i<dataLen;i++)
 156          //      {
 157          //      between=*oneData+between;
 158          //      oneData+=1;
 159          //      }
 160          //
 161          //      return between;
 162          //}
 163          
 164          
 165          
 166          
 167          
 168          
 169          
 170          
 171          
 172          
 173          
 174          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     62    ----
   CONSTANT SIZE    =   1000    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
